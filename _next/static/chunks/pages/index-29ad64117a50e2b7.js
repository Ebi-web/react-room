(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{2767:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return v}});var s=n(7294),a=n(9473),r=n(4456),c=n(6828),i=n(3457),d=n(2814),o=n(1436),u=n(5893),l=function(){return(0,u.jsxs)("header",{className:"p-5 bg-blue-300",children:[(0,u.jsx)("span",{className:"m-2",children:(0,u.jsx)(d.G,{icon:o.jMV})}),(0,u.jsx)("span",{className:"items-center select-none",children:"React ToDo test"})]})},p=n(4997);var h=function(){var e=(0,s.useState)(""),t=e[0],n=e[1],c=(0,s.useState)(""),i=c[0],l=c[1],h=(0,s.useState)(""),m=h[0],f=h[1],x=(0,a.v9)((function(e){return e.parentTaskId})),j=(0,a.I0)();return(0,u.jsxs)("div",{className:"border",children:[(0,u.jsx)("div",{children:(0,u.jsxs)("span",{className:"text-red-500",children:["**\u958b\u767a\u7528\u8868\u793a** \u89aa\u30bf\u30b9\u30afID: ",x.parentTaskId]})}),(0,u.jsxs)("div",{className:"flex",children:[(0,u.jsxs)("div",{className:"m-5",children:[(0,u.jsx)("label",{htmlFor:"input-taskname",children:"\u65b0\u3057\u3044\u30bf\u30b9\u30af\u540d\uff1a"}),(0,u.jsx)("input",{type:"text",id:"input-taskname",value:t,className:" w-52 rounded-md",onChange:function(e){return n(e.target.value)}})]}),(0,u.jsxs)("div",{className:"m-5",children:[(0,u.jsx)("label",{htmlFor:"input-duedate",children:"\u7de0\u3081\u5207\u308a\uff1a"}),(0,u.jsx)("input",{type:"date",id:"input-duedate",value:i,className:"rounded-md",onChange:function(e){l(e.target.value)}})]}),(0,u.jsxs)("button",{type:"submit",className:"border-2 m-5 p-2 rounded-md shadow-md hover:shadow-none",onClick:function(){var e={taskId:(0,p.SK)(),parentTaskId:x.parentTaskId,taskName:t,dueDate:i,status:!1},s=function(e){if(26!==e.taskId.length)return"\u30bf\u30b9\u30afID\u304c\u4e0d\u6b63\u3067\u3059";if(""===e.taskName)return"\u30bf\u30b9\u30af\u540d\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044";var t=new Date,n=new Date(e.dueDate);return isNaN(n.getDate())?"\u671f\u9650\u304c\u4e0d\u6b63\u3067\u3059":n.getTime()<t.getTime()?"\u7de0\u3081\u5207\u308a\u65e5\u306f\u672a\u6765\u306e\u65e5\u4ed8\u306b\u3057\u3066\u304f\u3060\u3055\u3044":""}(e);s?f(s):(j((0,r.gI)(e)),f(""),n(""))},children:[(0,u.jsx)("span",{className:"m-1",children:"\u8ffd\u52a0"}),(0,u.jsx)(d.G,{icon:o.r8p})]})]}),m?(0,u.jsx)("div",{className:"bg-red-200 m-1 p-1",children:m}):""]})},m=function(){var e=(0,a.I0)();return(0,u.jsxs)("button",{className:"border-2 m-5 p-2 hover:opacity-50",onClick:function(){return e((0,r.rp)())},children:[(0,u.jsx)("span",{children:"\u3059\u3079\u3066\u524a\u9664"}),(0,u.jsx)("span",{className:"m-1",children:(0,u.jsx)(d.G,{icon:o.Vui})})]})},f=n(9499);function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var j=function(e){var t=(0,s.useState)(!1),n=t[0],i=t[1],l=(0,a.v9)((function(e){return e.taskList})),p=(0,a.I0)(),h=l.taskList.filter((function(t){return e.task.taskId===t.parentTaskId})),m=h.map((function(e){return!0===e.status})).filter((function(e){return!0===e})).length,j=function(e,t){var n=l.taskList.map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e)})),s=n.map((function(n){return n.taskId===e&&(n.status=!t),n}));p((0,r.hC)(s))};return(0,u.jsxs)("div",{children:[(0,u.jsxs)("div",{className:"border w-1/2 flex-col flex break-words mb-3 p-3 rounded-xl shadow-md cursor-pointer\thover:shadow-inner","data-testid":"task-".concat(e.task.taskId),children:[(0,u.jsxs)("div",{className:"flex gap-6",children:[(0,u.jsx)("span",{className:"m-1 select-none hover:opacity-50",children:(0,u.jsx)(d.G,{icon:n?o.gc2:o.yOZ,onClick:function(){i(!n)}})}),(0,u.jsxs)("p",{children:[m,"/",h.length]}),(0,u.jsx)("input",{type:"checkbox",checked:e.task.status,onChange:function(){return j(e.task.taskId,e.task.status)}})]}),(0,u.jsxs)("div",{className:"flex justify-between",children:[(0,u.jsx)("span",{className:"text-xl font-semibold",children:e.task.taskName}),(0,u.jsxs)("div",{children:[(0,u.jsx)("span",{className:"m-1 select-none hover:opacity-50",children:(0,u.jsx)(d.G,{icon:o.r8p,onClick:function(){p((0,c.dI)(e.task.taskId))}})}),(0,u.jsx)("span",{className:"m-1 select-none hover:opacity-50",children:(0,u.jsx)(d.G,{icon:o.Vui,onClick:function(){l.taskList.findIndex((function(t){return t.parentTaskId===e.task.taskId}))>=0?(console.error("\u5c0f\u30bf\u30b9\u30af\u304c\u5b58\u5728\u3057\u307e\u3059"),alert("\u5c0f\u30bf\u30b9\u30af\u304c\u5b58\u5728\u3057\u307e\u3059")):p((0,r._5)(e.task.taskId))}})})]})]}),(0,u.jsxs)("p",{className:"font-light mt-2 text-xs",children:["\u7de0\u3081\u5207\u308a: ",e.task.dueDate]})]},e.task.taskId),n?(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(k,{parentTaskId:e.task.taskId,depth:Number(e.depth)+1})}):""]})},k=function(e){var t=(0,a.v9)((function(e){return e.taskList}));return(0,u.jsx)("ul",{className:"ml-4",children:t.taskList.filter((function(t){return t.parentTaskId===e.parentTaskId})).map((function(t){return(0,u.jsx)(j,{depth:e.depth,task:t},t.taskId)}))})},v=function(){var e=(0,a.I0)();return(0,s.useEffect)((function(){var t=(0,i.h)();e((0,r.hC)(t))}),[]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(l,{}),(0,u.jsx)("div",{children:(0,u.jsx)(h,{})}),(0,u.jsxs)("div",{className:"flex",children:[(0,u.jsx)("button",{className:"border-2 m-5 p-2 hover:opacity-50",onClick:function(){return e((0,c.dI)(null))},children:"\u30bf\u30b9\u30af\u8ffd\u52a0\u306e\u958b\u767a\u7528\uff1a\u89aa\u30bf\u30b9\u30afID\u306e\u30ea\u30bb\u30c3\u30c8"}),(0,u.jsx)("div",{children:(0,u.jsx)(m,{})})]}),(0,u.jsx)("div",{className:"ml-8",children:(0,u.jsx)(k,{parentTaskId:null,depth:0})})]})}},5301:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(2767)}])}},function(e){e.O(0,[523,714,774,888,179],(function(){return t=5301,e(e.s=t);var t}));var t=e.O();_N_E=t}]);